{{extend 'layout.html'}}
<div class="row">
  <div class="col-md-12">
    <h4 class="mb-3">Lista de Pagamentos Agendados</h4>
    <p>Todos os pagamentos referente ao projeto de venda e cobrança {{=projeto.descricao}}</p>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
     <a class="btn btn-primary  my-1" href="{{=URL('acs_projeto','index', args=projeto.id)}}">
          <i class="fa fa-fw fa-1x py-1 fa-arrow-left"></i>
          Voltar
        </a>
        <a class="btn btn-primary  my-1" href="{{=URL('cadastro_pagamento_projeto', args=projeto.id)}}">
          <i class="fa fa-fw fa-plus"></i>
          Adicionar
        </a>
    {{if False:}}
    <div class="row">
      <div class="col-md-4 col-6">
        <a class="btn btn-primary btn-block my-1" href="{{=URL('acs_projeto','index', args=projeto.id)}}">
          <i class="fa fa-fw fa-1x py-1 fa-arrow-left"></i>
          Voltar
        </a>
      </div>
      <div class="col-md-4 col-6">
        <a class="btn btn-primary btn-block my-1" href="{{=URL('cadastro_pagamento_projeto', args=projeto.id)}}">
          <i class="fa fa-fw fa-plus"></i>
          Adicionar
        </a>
      </div>
    </div>
    {{pass}}
  </div>
  <div class="col-md-6">
    <h4 class="my-1 text-right">Lista de Pagamentos<span class="badge badge-pill badge-warning">!</span></h4>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <h5 class="my-2 text-left"><span class="badge badge-pill badge-primary">Panina {{=pagina}}/{{=paginas}}</span></h5>
  </div>
  <div class="col-md-6">
     {{if not (consul):}}
                        <ul class="pagination m-2  justify-content-end">
                            {{ if pagina != 1: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,1])}}"> <i class="fa fa-angle-double-left"></i>
</a> </li>
                              {{ pass }}
                               {{ if (paginas-pagina) > -3 and (pagina > 3)  : }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina-3])}}">{{=pagina-3}}</a> </li>
                               {{ pass }}
                               {{ if (paginas-pagina) > -2 and (pagina > 2) : }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina-2])}}">{{=pagina-2}}</a> </li>
                               {{ pass }}
                               {{ if (paginas-pagina) > -1 and (pagina != 1) : }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina-1])}}">{{=pagina-1}}</a> </li>
                               {{ pass }}
                            {{ if (paginas) > 1: }}
                            <li class="page-item active"> <a class="page-link" href="#">{{=pagina}}</a> </li>
                               {{ pass }}
                            {{ if (paginas-pagina) > 0: }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina+1])}}">{{=pagina+1}}</a> </li>
                               {{ pass }}
                            {{ if (paginas-pagina) > 1: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina+2])}}">{{=pagina+2}}</a> </li>
                                {{ pass }}
                            {{ if (paginas-pagina) > 2: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina+3])}}">{{=pagina+3}}</a> </li>
                              {{ pass }}
                            {{ if pagina != paginas: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,paginas])}}"> <i class="fa fa-angle-double-right"></i>
</a> </li>
                              {{ pass }}
                          </ul>
                    {{pass}}
    
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div class="table-responsive">
      <table class="table table-striped table-borderless">
        <thead>
          <tr>
            <th scope="col">Status</th>
            <th scope="col">Vencimento</th>
            <th scope="col">Descrição</th>
            <th scope="col">Valor</th>
          </tr>
        </thead>
        <tbody>
          {{for row in rows:}}
          <tr>
            {{if row.quitado==True:}}
            <th scope="row"><span class="badge badge-success badge-pill" >{{=row.id+100}} Quitado</span></th>
            {{else:}}
            <th scope="row"><span class="badge badge-warning badge-pill" >{{=row.id+100}} Aguardando</span></th>
            {{pass}}
            <td>{{=row.data_cheque.strftime('%d/%m/%Y')}}</td>
            <td>{{=row.descricao}}</td>
            <td>R$ {{="{:,.2f}".format(round(row.valor,2)).replace(",","#").replace(".",",").replace("#",".")}}</td>
            <td>
              <a class="btn btn-primary my-1" href="{{=URL('alterar_pagamento_projeto', args=row.id)}}">
                <i class="fa fa-fw fa-pencil"></i>
                Alterar
              </a>
            </td>
          </tr>
          {{pass}}
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <h5 class="my-2 text-left"><span class="badge badge-pill badge-primary">Panina {{=pagina}}/{{=paginas}}</span></h5>
  </div></div>
  <div class="col-md-6">
     {{if not (consul):}}
                        <ul class="pagination m-2  justify-content-end">
                            {{ if pagina != 1: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,1])}}"> <i class="fa fa-angle-double-left"></i>
</a> </li>
                              {{ pass }}
                               {{ if (paginas-pagina) > -3 and (pagina > 3)  : }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina-3])}}">{{=pagina-3}}</a> </li>
                               {{ pass }}
                               {{ if (paginas-pagina) > -2 and (pagina > 2) : }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina-2])}}">{{=pagina-2}}</a> </li>
                               {{ pass }}
                               {{ if (paginas-pagina) > -1 and (pagina != 1) : }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina-1])}}">{{=pagina-1}}</a> </li>
                               {{ pass }}
                            {{ if (paginas) > 1: }}
                            <li class="page-item active"> <a class="page-link" href="#">{{=pagina}}</a> </li>
                               {{ pass }}
                            {{ if (paginas-pagina) > 0: }}
                            <li class="page-item "> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina+1])}}">{{=pagina+1}}</a> </li>
                               {{ pass }}
                            {{ if (paginas-pagina) > 1: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina+2])}}">{{=pagina+2}}</a> </li>
                                {{ pass }}
                            {{ if (paginas-pagina) > 2: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,pagina+3])}}">{{=pagina+3}}</a> </li>
                              {{ pass }}
                            {{ if pagina != paginas: }}
                            <li class="page-item"> <a class="page-link" href="{{ =URL('lista_pagamentos_projeto',args=[projeto.id,paginas])}}"> <i class="fa fa-angle-double-right"></i>
</a> </li>
                              {{ pass }}
                          </ul>
                    {{pass}}</div>
</div>
