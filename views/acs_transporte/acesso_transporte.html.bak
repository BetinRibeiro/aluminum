{{extend 'layout.html'}}
<div class="py-5" >
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h5 class="">Transporte ({{=transporte.descricao}})</h5>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <a class="btn btn-link" href="{{=URL('index', args=transporte.empresa)}}" style="color:#3b5998">
            <i class="fa fa-fw fa-1x py-1 fa-arrow-left"></i> Voltar
          </a>
          
          <a class="btn btn-link" href="{{=URL('alterar_transporte', args=transporte.id)}}" style="color:#3b5998">
            <i class="fa fa-fw fa-1x py-1 fa-square-o "></i> Alterar dados
          </a>
          <a class="btn btn-link" href="{{=URL('inserir_km', args=transporte.id)}}" style="color:#3b5998">
            <i class="fa fa-fw fa-1x py-1 fa-plus"></i> Adicionar novo km
          </a>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="table-responsive">
            <table class="table table-striped table-borderless">
              <thead>
                <tr>
                  <th scope="col">Data</th>
                  <th scope="col">Condutor</th>
                  <th scope="col">Descricao</th>
                  <th scope="col">km</th>
                  <th scope="col">Rodado</th>
                  <th scope="col">Custo/Km</th>
                  <th scope="col">Opção</th>
                </tr>
              </thead>
              <tbody>
                  {{km=0}}
                  {{kmanterior=0}}
                  {{for row in rows:}}
                {{if kmanterior==0:}}
                {{kmanterior=row.km}}
                {{pass}}
                <tr>
                  <th scope="row">
                    {{=("{}/{}/{}".format(row.data_registro.day,row.data_registro.month,row.data_registro.year))}}
                  </th>
                  <td>{{=row.condutor}}</td>
                  <td>{{=row.descricao}}</td>
                  <td>{{=row.km}}</td>
                  {{total_rodado=row.km-kmanterior}}
                  <td>{{=total_rodado}}</td>
                  {{consumo=row.valor_conbustivel}}
                  {{if (total_rodado>0) and (consumo>0):}}
                  {{custokm=consumo/total_rodado}}
                  <td>R$ {{="{:,}".format(round(custokm,2)).replace(",",".")}}</td>
                  {{else:}}
                  <td>R$ 0.00</td>
                  {{pass}}
                  <td><a class="btn btn-link" href="{{=URL('alterar_km', args=row.id)}}" style="color:#3b5998" >
                    <i class="fa fa-fw fa-1x py-1 fa-th-list"></i>
                    </a>
                  </td>
                  {{kmanterior=row.km}}
                </tr>
                  {{km=row.km}}
                  {{pass}}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

<div class="container">
      <div class="row text-center">
        <div class="col-md-12">
          <h3 class="mb-3">Lista de Registro do Transporte</h3>
          <p>Then, my friend, when darkness overspreads my eyes, and heaven and earth seem to dwell in my soul and absorb its power, like the form of a beloved mistress, then I often think with longing, Oh, would I could describe these conceptions, could impress upon paper all that is living so full and warm within me, that it might be the mirror of my soul, as my soul is the mirror of the infinite God!&nbsp;</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-3 col-6"><a class="btn btn-primary my-1 btn-block" href="#"><i class="fa fa-download fa-fw"></i>&nbsp;Voltar</a></div>
        <div class="col-md-3 col-6"><a class="btn btn-primary my-1 btn-block" href="#"><i class="fa fa-fw fa-plus"></i>&nbsp;Cadastrar</a></div>
        <div class="col-md-3 col-6">
          <h4 class="my-1">Heading 4 <span class="badge badge-pill badge-warning">!</span></h4>
        </div>
        <div class="col-md-3 col-6"></div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <h4 class="my-2">Heading 4 <span class="badge badge-pill badge-warning">!</span></h4>
        </div>
        <div class="col-md-6">
          <ul class="pagination my-1 justify-content-end">
            <li class="page-item"> <a class="page-link" href="#"> <span>«</span></a> </li>
            <li class="page-item active"> <a class="page-link" href="#">1</a> </li>
            <li class="page-item"> <a class="page-link" href="#">2</a> </li>
            <li class="page-item"> <a class="page-link" href="#">3</a> </li>
            <li class="page-item"> <a class="page-link" href="#">4</a> </li>
            <li class="page-item"> <a class="page-link" href="#"> <span>»</span></a> </li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="table-responsive">
            <table class="table table-striped table-borderless">
              <thead>
                <tr>
                  <th scope="col">Data</th>
                  <th scope="col">Placa</th>
                  <th scope="col">Função</th>
                  <th scope="col">Km's</th>
                  <th scope="col">Abastec.</th>
                  <th scope="col">Consumo</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">10/10 - 10/12 - 61 Dias</th>
                  <td>OCX-8975</td>
                  <th>Fiscalização</th>
                  <td>1.520 - 2.620 - 1.100 km's</td>
                  <td>R$ 168,00</td>
                  <td>30 lts - 36,6km/L</td>
                </tr>
                <tr>
                  <th scope="row">10/10 - 10/12 - 61 Dias</th>
                  <td>OCX-8975</td>
                  <th>Fiscalização</th>
                  <td>1.520 - 2.620 - 1.100 km's</td>
                  <td>R$ 168,00</td>
                  <td>30 lts - 36,6km/L</td>
                </tr>
                <tr>
                  <th scope="row">10/10 - 10/12 - 61 Dias</th>
                  <td>OCX-8975</td>
                  <th>Fiscalização</th>
                  <td>1.520 - 2.620 - 1.100 km's</td>
                  <td>R$ 168,00</td>
                  <td>30 lts - 36,6km/L</td>
                </tr>
                <tr>
                  <th scope="row">10/10 - 10/12 - 61 Dias</th>
                  <td>OCX-8975</td>
                  <th>Fiscalização</th>
                  <td>1.520 - 2.620 - 1.100 km's</td>
                  <td>R$ 168,00</td>
                  <td>30 lts - 36,6km/L</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
{{transporte.km=km}}
{{transporte.update_record()}}
